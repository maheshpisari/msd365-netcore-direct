<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamics 365 to Netcore Integration (Single File)</title>
    <style>
        /* General Styling (Same as before) */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f7f9;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: 30px auto;
            padding: 25px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2, h3 {
            color: #2c3e50;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        h1 { font-size: 2em; }
        h2 { font-size: 1.5em; margin-top: 30px; }
        h3 { font-size: 1.2em; margin-top: 25px; border-bottom-style: dashed; border-bottom-width: 1px; }
        p { margin-bottom: 15px; }
        code {
            font-family: "Consolas", "Monaco", "Courier New", monospace;
            background-color: #eef1f3;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            color: #c7254e;
        }
        .important-note {
            background-color: #fffbe6;
            border: 1px solid #ffe58f;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        .important-note strong {
            color: #d46b08;
        }

        /* Tab Styling (Same as before) */
        .tabs { margin-bottom: 0; border-bottom: 1px solid #d4dadf; padding-bottom: -1px; }
        .tab-button { padding: 10px 20px; cursor: pointer; border: 1px solid transparent; border-bottom: none; background-color: #f4f7f9; margin-right: 5px; border-radius: 5px 5px 0 0; font-size: 1em; position: relative; bottom: -1px; transition: background-color 0.3s ease, border-color 0.3s ease; }
        .tab-button:hover { background-color: #e9edf1; }
        .tab-button.active { background-color: #ffffff; border-color: #d4dadf; border-bottom: 1px solid #ffffff; font-weight: bold; color: #3498db; }

        /* Tab Content Area Styling (Same as before) */
        .tab-content-wrapper { padding: 20px; border: 1px solid #d4dadf; border-top: none; background-color: #ffffff; border-radius: 0 0 8px 8px; min-height: 200px; }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; }

        /* Code Block Styling (Same as before) */
        pre { background-color: #2d2d2d; color: #cccccc; padding: 20px; border-radius: 6px; overflow-x: auto; font-family: "Consolas", "Monaco", "Courier New", monospace; font-size: 0.9em; line-height: 1.5; margin-top: 15px; margin-bottom: 15px; }
        pre code { background-color: transparent; padding: 0; color: inherit; font-size: inherit; border-radius: 0; }
        .tab-pane p, .dynamics-section p { margin-top: 15px; margin-bottom: 10px; font-style: italic; color: #555; }
        .dynamics-section p { font-style: normal; } /* Override italic for dynamics explanation */
    </style>
</head>
<body>

    <div class="container">
        <h1>Integrating Microsoft Dynamics 365 with Netcore</h1>
        <p>
            This document outlines how to send contact data from Microsoft Dynamics 365
            to Netcore's Smartech API using a RESTful approach. The goal is to add or update
            contacts in a specific Netcore list when triggered by an event in Dynamics 365
            (e.g., creating a new Lead or Contact, updating specific fields).
        </p>
        <p>
            The Netcore API endpoint used for adding contacts requires a POST request
            with <code>Content-Type: application/x-www-form-urlencoded</code>. The contact data itself
            is sent as a JSON string within a form field named <code>data</code>.
        </p>
        <p>
            <strong>API Endpoint Structure:</strong><br>
            <code>https://api.netcoresmartech.com/apiv2?type=contact&activity=add&apikey=YOUR_API_KEY&listid=YOUR_LIST_ID</code>
        </p>
         <p>
            <strong>Request Body Format:</strong><br>
            <code>data={"EMAIL":"contact_email","MOBILE":"contact_mobile","FIRST_NAME":"contact_first","LAST_NAME":"contact_last"}</code>
            <br>(Note: The entire value for 'data' must be URL-encoded when sent).
        </p>

        <div class="dynamics-section">
            <h2>Dynamics 365 Implementation Approaches</h2>
            <p>
                To initiate the call to Netcore, you first need to configure or develop logic within Dynamics 365. This logic will trigger when a relevant event occurs (like creating/updating a Contact), retrieve the necessary data from the Dynamics record, and then make the HTTP request to Netcore's API.
            </p>
            <p>Common methods include:</p>
            <ul>
                <li><strong>Power Automate (Flow):</strong> [Recommended for Cloud] A low-code approach using the Dataverse connector trigger ("When a row is added, modified...") and the built-in HTTP action to call the Netcore API. Easier to build, manage, and deploy for many scenarios.</li>
                <li><strong>C# Plugin:</strong> Custom code offering maximum flexibility. Requires .NET development, compiling, signing, and registering the plugin assembly using the Plugin Registration Tool.</li>
                <li><strong>C# Custom Workflow Activity:</strong> Similar to a plugin but designed for use within the traditional Dynamics workflow engine.</li>
            </ul>

            <h3>Conceptual C# Plugin Example</h3>
            <p>
                Below is a conceptual example of a C# Plugin that triggers on the Create/Update of a 'contact' record. It retrieves contact details and calls the Netcore API.
            </p>
            <div class="important-note">
                <strong>Disclaimer:</strong> This is a conceptual example. You MUST adapt it for your specific Dynamics 365 environment.
                <ul>
                    <li>Replace placeholder values (API Key, List ID, Entity Name, Field Schema Names).</li>
                    <li>Implement secure storage for secrets (API Key/List ID) - do NOT hardcode them in production. Use Secure Configuration or Azure Key Vault.</li>
                    <li>Add robust error handling, logging, and potentially retry logic.</li>
                    <li>Test thoroughly, especially the synchronous call to the async method, in your specific Dynamics version and configuration (Online/On-Premises).</li>
                    <li>Understand the Plugin execution pipeline, context, and deployment process.</li>
                </ul>
            </div>
            <pre><code class="language-csharp">
// --- Conceptual C# Code for a Dynamics 365 Plugin ---
using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Text.Json; // Requires reference or compatible .NET version
using System.Threading.Tasks;
using Microsoft.Xrm.Sdk;
using Microsoft.Xrm.Sdk.Query; // For ColumnSet

// Register this plugin on Create/Update messages for 'contact' entity
public class NetcoreSyncPlugin : IPlugin
{
    // TODO: Securely store API Key and List ID (e.g., using Secure Configuration)
    private const string NetcoreApiKey = "YOUR_API_KEY"; // <<< REPLACE
    private const string NetcoreListId = "YOUR_LIST_ID"; // <<< REPLACE
    private const string NetcoreApiUrl = "https://api.netcoresmartech.com/apiv2";

    // Static HttpClient is generally recommended
    private static readonly HttpClient httpClient = new HttpClient { Timeout = TimeSpan.FromSeconds(30) };

    public void Execute(IServiceProvider serviceProvider)
    {
        ITracingService tracingService = (ITracingService)serviceProvider.GetService(typeof(ITracingService));
        IPluginExecutionContext context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));
        IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
        IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

        if (!(context.InputParameters.Contains("Target") &amp;&amp; context.InputParameters["Target"] is Entity)) return;

        Entity entity = (Entity)context.InputParameters["Target"];

        // --- Verify Correct Trigger Conditions ---
        // TODO: Replace 'contact' if using 'lead' or another entity
        if (entity.LogicalName != "contact") return;
        if (context.MessageName.ToLower() != "create" &amp;&amp; context.MessageName.ToLower() != "update") return;
        // TODO: Check Plugin Stage (e.g., PostOperation sync/async)

        try
        {
            tracingService.Trace($"NetcoreSyncPlugin: Processing {context.MessageName} for contact ID: {entity.Id}");

            // --- Retrieve Necessary Data ---
            // TODO: Use ACTUAL schema names from your Dynamics instance
            var columnsToRetrieve = new ColumnSet("firstname", "lastname", "emailaddress1", "mobilephone");

            Entity fullContactRecord = service.Retrieve(entity.LogicalName, entity.Id, columnsToRetrieve);

            // Extract data (handle potential nulls safely)
            string firstName = fullContactRecord.GetAttributeValue&lt;string&gt;("firstname") ?? "";
            string lastName = fullContactRecord.GetAttributeValue&lt;string&gt;("lastname") ?? "";
            string email = fullContactRecord.GetAttributeValue&lt;string&gt;("emailaddress1") ?? "";
            string mobile = fullContactRecord.GetAttributeValue&lt;string&gt;("mobilephone") ?? "";

            // --- Basic Validation ---
            if (string.IsNullOrWhiteSpace(email))
            {
                tracingService.Trace("NetcoreSyncPlugin: Skipping - Email address is missing.");
                return;
            }
            tracingService.Trace($"NetcoreSyncPlugin: Data - Email={email}, Mobile={mobile}");

            // --- Call Netcore API (Sync Wrapper - Test carefully!) ---
            bool success = SendContactToNetcoreSync(tracingService, email, mobile, firstName, lastName);

            if (success) {
                tracingService.Trace("NetcoreSyncPlugin: Successfully sent contact to Netcore.");
                // TODO: Optionally update Dynamics record on success
            } else {
                tracingService.Trace("NetcoreSyncPlugin: Failed to send contact to Netcore.");
                // TODO: Optionally update record or throw error
                // throw new InvalidPluginExecutionException("Failed to sync contact to Netcore.");
            }
        }
        catch (Exception ex)
        {
            tracingService.Trace($"NetcoreSyncPlugin: An error occurred: {ex}");
            throw new InvalidPluginExecutionException("An error occurred in the Netcore Sync Plugin.", ex);
        }
    }

    // Synchronous wrapper
    private bool SendContactToNetcoreSync(ITracingService tracer, string e, string m, string f, string l)
    {
         tracer.Trace("Entering SendContactToNetcoreSync");
         try {
             // Use .GetAwaiter().GetResult() carefully in sync plugins
             return SendContactToNetcoreAsync(tracer, e, m, f, l).GetAwaiter().GetResult();
         } catch(Exception ex) {
              tracer.Trace($"Error in SendContactToNetcoreSync wrapper: {ex}"); return false;
         } finally { tracer.Trace("Leaving SendContactToNetcoreSync"); }
    }

    // Async HTTP call method
    private async Task&lt;bool&gt; SendContactToNetcoreAsync(ITracingService tr, string email, string mob, string first, string last)
    {
        tr.Trace("Entering SendContactToNetcoreAsync");
        var contactPayload = new Dictionary&lt;string, string&gt; {
            { "EMAIL", email }, { "MOBILE", mob ?? "" }, { "FIRST_NAME", first ?? "" }, { "LAST_NAME", last ?? "" }
            // TODO: Add other mapped fields if needed
        };
        string dataJsonString = JsonSerializer.Serialize(contactPayload);
        tr.Trace($"Netcore Payload (JSON): {dataJsonString}");
        var formContent = new FormUrlEncodedContent(new[] { new KeyValuePair&lt;string, string&gt;("data", dataJsonString) });
        string requestUrl = $"{NetcoreApiUrl}?type=contact&amp;activity=add&amp;apikey={NetcoreApiKey}&amp;listid={NetcoreListId}";
        tr.Trace($"Netcore Request URL: {requestUrl}");

        try {
            HttpResponseMessage response = await httpClient.PostAsync(requestUrl, formContent);
            string responseBody = await response.Content.ReadAsStringAsync();
            tr.Trace($"Netcore Response Status: {response.StatusCode}, Body: {responseBody}");
            return response.IsSuccessStatusCode; // Checks 2xx
        } catch (Exception e) {
            tr.Trace($"Netcore API call error: {e}"); return false;
        } finally { tr.Trace("Leaving SendContactToNetcoreAsync"); }
    }
}
            </code></pre>
            <p>
                Remember this C# code needs to be compiled, signed, and deployed using the Plugin Registration Tool.
            </p>

            <h3>Power Automate (Flow) Outline</h3>
             <p>
                Using Power Automate is often simpler for Dynamics 365 Online:
            </p>
            <ol>
                <li><strong>Trigger:</strong> Dataverse - "When a row is added, modified or deleted" (Configure for Create/Update of Contact/Lead, set Filtering Attributes).</li>
                <li><strong>Action (Optional):</strong> Dataverse - "Get a row by ID" (Use Trigger output Row ID).</li>
                <li><strong>Action:</strong> HTTP - Configure POST request:
                    <ul>
                        <li><strong>URI:</strong> Netcore API URL with API key/List ID (use Environment Variables ideally).</li>
                        <li><strong>Headers:</strong> `Content-Type` : `application/x-www-form-urlencoded`</li>
                        <li><strong>Body:</strong> `data={...JSON_STRING...}` using dynamic content for fields (e.g., `data={"EMAIL":"@{outputs('Get_a_row_by_ID')?['body/emailaddress1']}"...}`. Ensure valid JSON structure).</li>
                        <li><strong>Authentication:</strong> None.</li>
                    </ul>
                 </li>
                 <li><strong>Action (Optional):</strong> Condition - Check HTTP Status Code, perform actions based on success/failure.</li>
            </ol>
        </div>
        <h2>Netcore API Call Examples</h2>
        <p>
            Once you have retrieved the data within Dynamics 365 (using one of the methods above), the following examples show how to structure the actual HTTP POST request to Netcore's API in various languages. The C# example below is similar to the one used within the plugin code shown previously.
        </p>

        <div class="tabs">
            <button class="tab-button active" data-target="#python-content">Python</button>
            <button class="tab-button" data-target="#java-content">Java</button>
            <button class="tab-button" data-target="#javascript-content">JavaScript (Node.js)</button>
            <button class="tab-button" data-target="#csharp-content">C# (Standalone)</button>
            <button class="tab-button" data-target="#php-content">PHP</button>
        </div>

        <div class="tab-content-wrapper">

            <div id="python-content" class="tab-pane active">
                <pre><code class="language-python">
# (Python code example remains the same as before)
import requests
import json
import urllib.parse

# --- Configuration ---
NETCORE_API_KEY = 'YOUR_API_KEY'
NETCORE_LIST_ID = 'YOUR_LIST_ID'
BASE_URL = 'https://api.netcoresmartech.com/apiv2'

# --- Data (Simulated - In reality, comes from Dynamics) ---
contact_data = {
    "EMAIL": "mike.python@example.com",
    "MOBILE": "9876543210",
    "FIRST_NAME": "Mike",
    "LAST_NAME": "Python"
}

# --- Prepare Request ---
url = f"{BASE_URL}?type=contact&amp;activity=add&amp;apikey={NETCORE_API_KEY}&amp;listid={NETCORE_LIST_ID}"
data_json_string = json.dumps(contact_data)
payload = {'data': data_json_string}
headers = {'Content-Type': 'application/x-www-form-urlencoded'}

# --- Send Request ---
try:
    response = requests.post(url, data=payload, headers=headers)
    response.raise_for_status()
    print(f"Status Code: {response.status_code}")
    print("Response Body:")
    try:
        print(json.dumps(response.json(), indent=2))
    except json.JSONDecodeError:
        print(response.text)
except requests.exceptions.RequestException as e:
    print(f"An error occurred: {e}")

                </code></pre>
                <p>
                    This Python script uses <code>requests</code>. It constructs the URL, prepares contact data as JSON, puts it in the `data` form field, and sends the POST request. Assumes data is already retrieved. Replace placeholders.
                </p>
            </div>

            <div id="java-content" class="tab-pane">
                <pre><code class="language-java">
// (Java code example remains the same as before)
import java.net.URI;
import java.net.URLEncoder;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.nio.charset.StandardCharsets;
import java.time.Duration;

public class NetcoreIntegration {
    private static final String NETCORE_API_KEY = "YOUR_API_KEY";
    private static final String NETCORE_LIST_ID = "YOUR_LIST_ID";
    private static final String BASE_URL = "https://api.netcoresmartech.com/apiv2";

    public static void main(String[] args) {
        // --- Data (Simulated - In reality, comes from Dynamics) ---
        String contactJsonData = """
        {"EMAIL":"mike.java@example.com","MOBILE":"9876543211","FIRST_NAME":"Mike","LAST_NAME":"Java"}
        """;

        try {
            String urlString = String.format("%s?type=contact&amp;activity=add&amp;apikey=%s&amp;listid=%s",
                    BASE_URL, NETCORE_API_KEY, NETCORE_LIST_ID);
            String urlEncodedData = URLEncoder.encode(contactJsonData, StandardCharsets.UTF_8);
            String requestBody = "data=" + urlEncodedData;

            HttpClient client = HttpClient.newBuilder().build();
            HttpRequest request = HttpRequest.newBuilder()
                    .uri(URI.create(urlString))
                    .header("Content-Type", "application/x-www-form-urlencoded")
                    .POST(HttpRequest.BodyPublishers.ofString(requestBody))
                    .build();
            HttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());
            System.out.println("Status Code: " + response.statusCode());
            System.out.println("Response Body:" + response.body());
        } catch (Exception e) { e.printStackTrace(); }
    }
}
                </code></pre>
                <p>
                    This Java example uses <code>java.net.http.HttpClient</code> (Java 11+). It URL-encodes the JSON data string and sends it as the value of the `data` form parameter. Assumes data is retrieved. Replace placeholders. Note HTML escaping (&amp;lt;, &amp;gt;, &amp;amp;).
                </p>
            </div>

            <div id="javascript-content" class="tab-pane">
                <pre><code class="language-javascript">
// (Node.js code example remains the same as before)
const https = require('https');
const querystring = require('querystring');

const NETCORE_API_KEY = 'YOUR_API_KEY';
const NETCORE_LIST_ID = 'YOUR_LIST_ID';
const BASE_URL = 'api.netcoresmartech.com';
const API_PATH = `/apiv2?type=contact&amp;activity=add&amp;apikey=${NETCORE_API_KEY}&amp;listid=${NETCORE_LIST_ID}`;

// --- Data (Simulated - In reality, comes from Dynamics) ---
const contactData = {"EMAIL":"mike.js@example.com","MOBILE":"9876543212","FIRST_NAME":"Mike","LAST_NAME":"JavaScript"};

const dataJsonString = JSON.stringify(contactData);
const postData = querystring.stringify({ data: dataJsonString });

const options = {
    hostname: BASE_URL, path: API_PATH, method: 'POST',
    headers: {'Content-Type':'application/x-www-form-urlencoded','Content-Length':Buffer.byteLength(postData)}
};

const req = https.request(options, (res) =&gt; {
    console.log(`Status Code: ${res.statusCode}`);
    let responseBody = '';
    res.setEncoding('utf8');
    res.on('data', (chunk) =&gt; { responseBody += chunk; });
    res.on('end', () =&gt; { console.log('Response Body:', responseBody); });
});
req.on('error', (e) =&gt; { console.error(`Problem with request: ${e.message}`); });
req.write(postData);
req.end();
                </code></pre>
                 <p>
                    This Node.js example uses built-in modules. It stringifies the data, then uses `querystring.stringify` to create the `data=JSON_STRING` payload. Assumes data is retrieved. Replace placeholders. Note HTML escaping (&amp;amp;). <br><strong>Security Note:</strong> Avoid exposing API keys in client-side browser JS.
                </p>
            </div>

            <div id="csharp-content" class="tab-pane">
                 <pre><code class="language-csharp">
// (Standalone C# example remains similar to plugin HTTP call part)
using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Text.Json;
using System.Threading.Tasks;

public class NetcoreApiClient
{
    private static readonly string NetcoreApiKey = "YOUR_API_KEY"; // <<< REPLACE
    private static readonly string NetcoreListId = "YOUR_LIST_ID"; // <<< REPLACE
    private static readonly string NetcoreApiUrl = "https://api.netcoresmartech.com/apiv2";
    private static readonly HttpClient httpClient = new HttpClient();

    public static async Task SendContactToNetcoreStandalone()
    {
        // --- Data (Simulated - In reality, comes from Dynamics) ---
        var contactData = new Dictionary&lt;string, string&gt; {
            { "EMAIL", "mike.csharp.standalone@example.com" }, { "MOBILE", "9876543213" },
            { "FIRST_NAME", "Mike" }, { "LAST_NAME", "CSharp" }
        };

        string dataJsonString = JsonSerializer.Serialize(contactData);
        var formContent = new FormUrlEncodedContent(new[] {
            new KeyValuePair&lt;string, string&gt;("data", dataJsonString)
        });

        string requestUrl = $"{NetcoreApiUrl}?type=contact&amp;activity=add&amp;apikey={NetcoreApiKey}&amp;listid={NetcoreListId}";
        Console.WriteLine($"Sending POST to: {requestUrl}");

        try {
            HttpResponseMessage response = await httpClient.PostAsync(requestUrl, formContent);
            string responseBody = await response.Content.ReadAsStringAsync();
            Console.WriteLine($"Status: {(int)response.StatusCode}");
            Console.WriteLine($"Response: {responseBody}");
            response.EnsureSuccessStatusCode(); // Throw on failure
        } catch (Exception e) {
            Console.Error.WriteLine($"Error: {e.Message}");
        }
    }
    // Call it: await SendContactToNetcoreStandalone();
}
                </code></pre>
                 <p>
                    This C# example uses <code>HttpClient</code> and <code>FormUrlEncodedContent</code>. It serializes data to JSON and includes it in the form payload. This standalone version is very similar to the HTTP call part within the plugin example. Assumes data is retrieved. Replace placeholders. Note HTML escaping (&amp;lt;, &amp;gt;, &amp;amp;).
                </p>
            </div>

            <div id="php-content" class="tab-pane">
                 <pre><code class="language-php">
&lt;?php
// (PHP code example remains the same as before)
$netcoreApiKey = 'YOUR_API_KEY'; // <<< REPLACE
$netcoreListId = 'YOUR_LIST_ID'; // <<< REPLACE
$baseUrl = 'https://api.netcoresmartech.com/apiv2';

// --- Data (Simulated - In reality, comes from Dynamics) ---
$contactData = ["EMAIL" => "mike.php@example.com", "MOBILE" => "9876543214", "FIRST_NAME" => "Mike", "LAST_NAME" => "PHP"];

$requestUrl = $baseUrl . '?' . http_build_query(['type'=>'contact','activity'=>'add','apikey'=>$netcoreApiKey,'listid'=>$netcoreListId]);
$dataJsonString = json_encode($contactData);
$postData = ['data' => $dataJsonString];
$postDataString = http_build_query($postData);

// --- Send Request using cURL ---
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $requestUrl);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postDataString);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/x-www-form-urlencoded']);

$response = curl_exec($ch);
$httpStatusCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
$curlError = curl_error($ch);
curl_close($ch);

echo "Status Code: " . htmlspecialchars($httpStatusCode) . "\n";
if ($curlError) { echo "cURL Error: " . htmlspecialchars($curlError) . "\n"; }
else { echo "Response Body:\n" . htmlspecialchars($response) . "\n"; }
?&gt;
                 </code></pre>
                 <p>
                    This PHP example uses cURL. It encodes the data to JSON, then uses <code>http_build_query</code> on the `['data' => $jsonData]` array to create the URL-encoded payload. Assumes data is retrieved. Replace placeholders. Note HTML escaping (&amp;lt;, &amp;gt;).
                </p>
            </div>

        </div></div><script>
        // (JavaScript for tabs remains the same as before)
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.tab-button');
            const panes = document.querySelectorAll('.tab-pane');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetId = tab.getAttribute('data-target');
                    tabs.forEach(t => t.classList.remove('active'));
                    panes.forEach(p => p.classList.remove('active'));
                    tab.classList.add('active');
                    const targetPane = document.querySelector(targetId);
                    if (targetPane) {
                        targetPane.classList.add('active');
                    } else { console.error("Target pane not found:", targetId); }
                });
            });
        });
    </script>

</body>
</html>
